<!-- Search Form -->
<div class="flex justify-end items-center mb-2 p-2">
  <form [formGroup]="taskForm" (ngSubmit)="searchTasks()">
    <div class="flex space-x-4 mx-auto p-2">
      <input type="text" formControlName="searchId" placeholder="Search by Task ID"
        class="px-4 py-2 border rounded-md" />
      <select formControlName="searchStatus" class="px-4 py-2 border rounded-md">
        <option value="">Select Status</option>
        <option value="Completed">Completed</option>
        <option value="Pending">Pending</option>
      </select>

      <!-- <button type="submit" class="px-6 py-2 border bg-blue-500 text-white rounded-md hover:bg-blue-600">
        Search
      </button> -->
    </div>

  </form>
</div>

<!-- Table for tasks -->
<div class="container mx-auto">
  <div class="overflow-x-auto bg-white shadow-md rounded-lg">
    <table class="min-w-full table-auto">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Task ID</th>
          <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Title</th>
          <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Status</th>
          <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of filteredTasks"
          class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
          <td class="px-4 py-4 text-left text-sm text-gray-700">{{ task.id }}</td>
          <td class="px-4 py-4 text-left text-sm text-gray-700">{{ task.title }}</td>
          <td class="px-4 py-4 text-left text-sm text-gray-700">
            <span [ngClass]="task.completed ? 'text-green-600 font-semibold' : 'text-yellow-500 font-semibold'">
              {{ task.completed ? "Completed" : "Pending" }}
            </span>
          </td>
          <td class="px-4 py-4 text-left text-sm flex space-x-4">
            <button (click)="viewTask(task.id)" class="p-2 text-blue-500 hover:text-blue-700 focus:outline-none">
              <img src="./assets/lsicon--view-filled.svg" alt="Edit" class="h-5 w-5" />
            </button>
            <button (click)="confirmDelete(task.id)" class="p-2 text-red-500 hover:text-red-700 focus:outline-none">
              <img src="./assets/weui--delete-filled.svg" alt="Delete" class="h-5 w-5" />
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div *ngIf="showDeleteModal" class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-80 text-center">
    <h2 class="text-lg font-semibold mb-4">Delete Task</h2>
    <p class="text-gray-700 mb-6">Are you sure you want to delete this task?</p>
    <div class="flex justify-around">
      <button (click)="deleteTask()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
        Yes
      </button>
      <button (click)="closeModal()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400">
        No
      </button>
    </div>
  </div>
</div>